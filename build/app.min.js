!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){"use strict";n(1),n(5),n(6);var r=n(8),i=n(9),o=n(10);i.render(r.createElement(o,null),document.getElementById("react-wrap"))},function(t,e){"use strict"},,,,function(t,e,n){var r,r;(function(t){!function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof r&&r;if(!c&&u)return r(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n?n:e)},f,f.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t!==r&&c(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(t,e,n){d(function(){var r;try{r=e(n)}catch(i){return v.reject(t,i)}r===t?v.reject(t,new TypeError("Cannot resolve promise with itself")):v.resolve(t,r)})}function a(t){var e=t&&t.then;return t&&"object"==typeof t&&"function"==typeof e?function(){e.apply(t,arguments)}:void 0}function c(t,e){function n(e){o||(o=!0,v.reject(t,e))}function r(e){o||(o=!0,v.resolve(t,e))}function i(){e(r,n)}var o=!1,s=u(i);"error"===s.status&&n(s.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}function l(t){return t instanceof this?t:v.resolve(new this(r),t)}function f(t){var e=new this(r);return v.reject(e,t)}function p(t){function e(t,e){function r(t){s[e]=t,++a!==i||o||(o=!0,v.resolve(u,s))}n.resolve(t).then(r,function(t){o||(o=!0,v.reject(u,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,c=-1,u=new this(r);++c<i;)e(t[c],c);return u}function h(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,v.resolve(a,t))},function(t){o||(o=!0,v.reject(a,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,a=new this(r);++s<i;)e(t[s]);return a}var d=t("immediate"),v={},m=["REJECTED"],y=["FULFILLED"],g=["PENDING"];e.exports=n=i,i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===y||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==g){var i=this.state===y?t:e;s(n,i,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){v.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){v.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},v.resolve=function(t,e){var n=u(a,e);if("error"===n.status)return v.reject(t,n.value);var r=n.value;if(r)c(t,r);else{t.state=y,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},v.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},n.resolve=l,n.reject=f,n.all=p,n.race=h},{immediate:2}],2:[function(e,n,r){(function(t){"use strict";function e(){l=!0;for(var t,e,n=f.length;n;){for(e=f,f=[],t=-1;++t<n;)e[t]();n=f.length}l=!1}function r(t){1!==f.push(t)||l||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(e),c=t.document.createTextNode("");a.observe(c,{characterData:!0}),i=function(){c.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var u=new t.MessageChannel;u.port1.onmessage=e,i=function(){u.port2.postMessage(0)}}var l,f=[];n.exports=r}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e("./lib"))}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib":1}]},{},[3])}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||o).prototype),s=new d(r||[]);return i._invoke=f(t,n,s),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function s(){}function a(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){this.arg=t}function l(t){function e(n,r,o,s){var a=i(t[n],t,r);if("throw"!==a.type){var c=a.arg,l=c.value;return l instanceof u?Promise.resolve(l.arg).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(l).then(function(t){c.value=t,o(c)},s)}s(a.arg)}function r(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=r}function f(t,e,n){var r=S;return function(o,s){if(r===R)throw new Error("Generator is already running");if(r===T){if("throw"===o)throw s;return m()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===y){n.delegate=null;var c=a.iterator["return"];if(c){var u=i(c,a.iterator,s);if("throw"===u.type){o="throw",s=u.arg;continue}}if("return"===o)continue}var u=i(a.iterator[o],a.iterator,s);if("throw"===u.type){n.delegate=null,o="throw",s=u.arg;continue}o="next",s=y;var l=u.arg;if(!l.done)return r=O,l;n[a.resultName]=l.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)r===O?n.sent=s:n.sent=y;else if("throw"===o){if(r===S)throw r=T,s;n.dispatchException(s)&&(o="next",s=y)}else"return"===o&&n.abrupt("return",s);r=R;var u=i(t,e,n);if("normal"===u.type){r=n.done?T:O;var l={value:u.arg,done:n.done};if(u.arg!==A)return l;n.delegate&&"next"===o&&(s=y)}else"throw"===u.type&&(r=T,o="throw",s=u.arg)}}}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function v(t){if(t){var e=t[E];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(g.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=y,i.done=!0,i};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",b=w.toStringTag||"@@toStringTag",_="object"==typeof t,x=e.regeneratorRuntime;if(x)return void(_&&(t.exports=x));x=e.regeneratorRuntime=_?t.exports:{},x.wrap=r;var S="suspendedStart",O="suspendedYield",R="executing",T="completed",A={},L=a.prototype=o.prototype;s.prototype=L.constructor=a,a.constructor=s,a[b]=s.displayName="GeneratorFunction",x.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===s||"GeneratorFunction"===(e.displayName||e.name):!1},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(L),t},x.awrap=function(t){return new u(t)},c(l.prototype),x.async=function(t,e,n,i){var o=new l(r(t,e,n,i));return x.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},c(L),L[E]=function(){return this},L[b]="Generator",L.toString=function(){return"[object Generator]"},x.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=v,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=g.call(i,"catchLoc"),a=g.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),A},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),A}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},A}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(7))},function(t,e){function n(){u=!1,s.length?c=s.concat(c):l=-1,c.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,u=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},c=[],u=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||u||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";var r=n(8),i=(n(9),n(11).category),o=n(31).category,s=r.createClass({displayName:"Main",getInitialState:function(){return{list:["love","peace","bluesky"]}},onStatusChange:function(t){this.setState(t)},componentDidMount:function(){this.unsubscribe=i.listen(this.onStatusChange)},componentWillUnmount:function(){this.unsubscribe()},handleClick:function(){o()},render:function(){return r.createElement("div",{className:"test"},this.state.list?this.state.list.map(function(t){return r.createElement("div",{key:t},t)}):"",this.state.errMsg?this.state.errMsg:"",r.createElement("br",null),r.createElement("button",{onClick:this.handleClick},"更新列表"))}});t.exports=s},function(t,e,n){"use strict";function r(){var t=new Promise(function(t,e){var n={api:"mtop.need.search.category",v:"1.0",data:"{}"},r=a.request(n);r.then(function(n){n.retType==a.RESPONSE_TYPE.SUCCESS?t(n.data):e(new Error("接口错误222(search.category)"))})["catch"](function(t){e(new Error("网络错误222(search.category)"))})});return t}var i=n(12),o=n(31).category,s=n(32),a=n(33),c=i.createStore({init:function(){this.listenTo(o,this.requestMtop)},requestMtop:function(){var t=this;s(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return n=e.sent,t.successfulState(n),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})).then(function(t){console.log("result data :  "+t)})["catch"](function(e){console.error(e.stack),t.failedState(e)})},successfulState:function(t){var e=t.categorys.map(function(t){return t.name});this.trigger({list:e})},failedState:function(t){this.trigger({list:null,errMsg:t.message})}});t.exports={category:c}},function(t,e,n){var r=n(13);r.connect=n(26),r.connectFilter=n(28),r.ListenerMixin=n(27),r.listenTo=n(29),r.listenToMany=n(30),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={version:{"reflux-core":"0.3.0"}};r.ActionMethods=n(14),r.ListenerMethods=n(15),r.PublisherMethods=n(24),r.StoreMethods=n(23),r.createAction=n(25),r.createStore=n(19);var i=n(18).staticJoinCreator;r.joinTrailing=r.all=i("last"),r.joinLeading=i("first"),r.joinStrict=i("strict"),r.joinConcat=i("all");var o=r.utils=n(16);r.EventEmitter=o.EventEmitter,r.Promise=o.Promise,r.createActions=function(){var t=function(t,e){Object.keys(t).forEach(function(n){var i=t[n];e[n]=r.createAction(i)})};return function(e){var n={};return e instanceof Array?e.forEach(function(e){o.isObject(e)?t(e,n):n[e]=r.createAction(e)}):t(e,n),n}}(),r.setEventEmitter=function(t){r.EventEmitter=o.EventEmitter=t},r.nextTick=function(t){o.nextTick=t},r.use=function(t){t(r)},r.__keep=n(20),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5"),e["default"]=r,t.exports=e["default"]},function(t,e){"use strict";t.exports={}},function(t,e,n){"use strict";var r=n(16),i=n(18).instanceJoinCreator,o=function(t){for(var e,n=0,r={};n<(t.children||[]).length;++n)e=t.children[n],t[e]&&(r[e]=t[e]);return r},s=function a(t){var e={};for(var n in t){var i=t[n],s=o(i),c=a(s);e[n]=i;for(var u in c){var l=c[u];e[n+r.capitalize(u)]=l}}return e};t.exports={hasListener:function(t){for(var e,n,r,i=0;i<(this.subscriptions||[]).length;++i)for(r=[].concat(this.subscriptions[i].listenable),e=0;e<r.length;e++)if(n=r[e],n===t||n.hasListener&&n.hasListener(t))return!0;return!1},listenToMany:function(t){var e=s(t);for(var n in e){var i=r.callbackName(n),o=this[i]?i:this[n]?n:void 0;o&&this.listenTo(e[n],o,this[i+"Default"]||this[o+"Default"]||o)}},validateListening:function(t){return t===this?"Listener is not able to listen to itself":r.isFunction(t.listen)?t.hasListener&&t.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:t+" is missing a listen method"},listenTo:function(t,e,n){var i,o,s,a=this.subscriptions=this.subscriptions||[];return r.throwIf(this.validateListening(t)),this.fetchInitialState(t,n),i=t.listen(this[e]||e,this),o=function(){var t=a.indexOf(s);r.throwIf(-1===t,"Tried to remove listen already gone from subscriptions list!"),a.splice(t,1),i()},s={stop:o,listenable:t},a.push(s),s},stopListeningTo:function(t){for(var e,n=0,i=this.subscriptions||[];n<i.length;n++)if(e=i[n],e.listenable===t)return e.stop(),r.throwIf(-1!==i.indexOf(e),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var t,e=this.subscriptions||[];t=e.length;)e[0].stop(),r.throwIf(e.length!==t-1,"Failed to remove listen from subscriptions list!")},fetchInitialState:function(t,e){e=e&&this[e]||e;var n=this;if(r.isFunction(e)&&r.isFunction(t.getInitialState)){var i=t.getInitialState();i&&r.isFunction(i.then)?i.then(function(){e.apply(n,arguments)}):e.call(this,i)}},joinTrailing:i("last"),joinLeading:i("first"),joinConcat:i("all"),joinStrict:i("strict")}},function(t,e,n){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(t,n){return n=n||"on",n+e.capitalize(t)}function o(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function s(t){if(!o(t))return t;for(var e,n,r=1,i=arguments.length;i>r;r++){e=arguments[r];for(n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s)}else t[n]=e[n]}return t}function a(t){return"function"==typeof t}function c(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}function u(t){return"object"==typeof t&&"callee"in t&&"number"==typeof t.length}function l(t,e){if(t)throw Error(e||t)}Object.defineProperty(e,"__esModule",{value:!0}),e.capitalize=r,e.callbackName=i,e.isObject=o,e.extend=s,e.isFunction=a,e.object=c,e.isArguments=u,e.throwIf=l,e.EventEmitter=n(17),e.nextTick=function(t){setTimeout(t,0)}},function(t,e,n){"use strict";function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}var o="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(t,e){var n=o?o+t:t,r=this._events&&this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);s>i;i++)a[i]=r[i].fn;return a},i.prototype.emit=function(t,e,n,r,i,s){var a=o?o+t:t;if(!this._events||!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,s),!0}for(u=1,c=new Array(f-1);f>u;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;h>u;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;default:if(!c)for(p=1,c=new Array(f-1);f>p;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(t,e,n){var i=new r(e,n||this),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,!0),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events||!this._events[i])return this;var s=this._events[i],a=[];if(e)if(s.fn)(s.fn!==e||r&&!s.once||n&&s.context!==n)&&a.push(s);else for(var c=0,u=s.length;u>c;c++)(s[c].fn!==e||r&&!s[c].once||n&&s[c].context!==n)&&a.push(s[c]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,t.exports=i},function(t,e,n){"use strict";function r(t,e,n){return function(){var r,i=n.subscriptions,o=i?i.indexOf(t):-1;for(c.throwIf(-1===o,"Tried to remove join already gone from subscriptions list!"),r=0;r<e.length;r++)e[r]();i.splice(o,1)}}function i(t){t.listenablesEmitted=new Array(t.numberOfListenables),t.args=new Array(t.numberOfListenables)}function o(t,e){return function(){var n=u.call(arguments);if(e.listenablesEmitted[t])switch(e.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":e.args[t]=n;break;case"all":e.args[t].push(n)}else e.listenablesEmitted[t]=!0,e.args[t]="all"===e.strategy?[n]:n;s(e)}}function s(t){for(var e=0;e<t.numberOfListenables;e++)if(!t.listenablesEmitted[e])return;t.callback.apply(t.listener,t.args),i(t)}var a=n(19),c=n(16),u=Array.prototype.slice,l={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};e.staticJoinCreator=function(t){return function(){var e=u.call(arguments);return a({init:function(){this[l[t]].apply(this,e.concat("triggerAsync"))}})}},e.instanceJoinCreator=function(t){return function(){c.throwIf(arguments.length<2,"Cannot create a join with less than 2 listenables!");var e,n,s=u.call(arguments),a=s.pop(),l=s.length,f={numberOfListenables:l,callback:this[a]||a,listener:this,strategy:t},p=[];for(e=0;l>e;e++)c.throwIf(this.validateListening(s[e]));for(e=0;l>e;e++)p.push(s[e].listen(o(e,f),this));return i(f),n={listenable:s},n.stop=r(n,p,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},function(t,e,n){"use strict";var r=n(16),i=n(20),o=n(21),s=n(22),a={preEmit:1,shouldEmit:1};t.exports=function(t){function e(){var e,n=0;if(this.subscriptions=[],this.emitter=new r.EventEmitter,this.eventLabel="change",s(this,t),this.init&&r.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);n<e.length;n++)this.listenToMany(e[n])}var c=n(23),u=n(24),l=n(15);t=t||{};for(var f in c)if(!a[f]&&(u[f]||l[f]))throw new Error("Cannot override API method "+f+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var p in t)if(!a[p]&&(u[p]||l[p]))throw new Error("Cannot override API method "+p+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");t=o(t),r.extend(e.prototype,l,u,c,t);var h=new e;return i.createdStores.push(h),h}},function(t,e){"use strict";e.createdStores=[],e.createdActions=[],e.reset=function(){for(;e.createdStores.length;)e.createdStores.pop();for(;e.createdActions.length;)e.createdActions.pop()}},function(t,e,n){"use strict";var r=n(16);t.exports=function(t){var e={init:[],preEmit:[],shouldEmit:[]},n=function i(t){var n={};return t.mixins&&t.mixins.forEach(function(t){r.extend(n,i(t))}),r.extend(n,t),Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&e[n].push(t[n])}),n}(t);return e.init.length>1&&(n.init=function(){var t=arguments;e.init.forEach(function(e){e.apply(this,t)},this)}),e.preEmit.length>1&&(n.preEmit=function(){return e.preEmit.reduce(function(t,e){var n=e.apply(this,t);return void 0===n?t:[n]}.bind(this),arguments)}),e.shouldEmit.length>1&&(n.shouldEmit=function(){var t=arguments;return!e.shouldEmit.some(function(e){return!e.apply(this,t)},this)}),Object.keys(e).forEach(function(t){1===e[t].length&&(n[t]=e[t][0])}),n}},function(t,e){"use strict";t.exports=function(t,e){for(var n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var r=Object.getOwnPropertyDescriptor(e,n);if(!r.value||"function"!=typeof r.value||!e.hasOwnProperty(n))continue;t[n]=e[n].bind(t)}else{var i=e[n];if("function"!=typeof i||!e.hasOwnProperty(n))continue;t[n]=i.bind(t)}return t}},function(t,e){"use strict";t.exports={}},function(t,e,n){"use strict";var r=n(16);t.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(t,e){e=e||this;var n=function(n){i||t.apply(e,n)},r=this,i=!1;return this.emitter.addListener(this.eventLabel,n),function(){i=!0,r.emitter.removeListener(r.eventLabel,n)}},trigger:function(){var t=arguments,e=this.preEmit.apply(this,t);t=void 0===e?t:r.isArguments(e)?e:[].concat(e),this.shouldEmit.apply(this,t)&&this.emitter.emit(this.eventLabel,t)},triggerAsync:function(){var t=arguments,e=this;r.nextTick(function(){e.trigger.apply(e,t)})},deferWith:function(t){var e=this.trigger,n=this,r=function(){e.apply(n,arguments)};this.trigger=function(){t.apply(n,[r].concat([].splice.call(arguments,0)))}}}},function(t,e,n){"use strict";var r=n(16),i=n(14),o=n(24),s=n(20),a={preEmit:1,shouldEmit:1},c=function u(t){t=t||{},r.isObject(t)||(t={actionName:t});for(var e in i)if(!a[e]&&o[e])throw new Error("Cannot override API method "+e+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in t)if(!a[n]&&o[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[],t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));for(var c=0,l={};c<t.children.length;c++){var f=t.children[c];l[f]=u(f)}var p=r.extend({eventLabel:"action",emitter:new r.EventEmitter,_isAction:!0},o,i,t),h=function d(){var t=d.sync?"trigger":"triggerAsync";return d[t].apply(d,arguments)};return r.extend(h,l,p),s.createdActions.push(h),h};t.exports=c},function(t,e,n){var r=n(15),i=n(27),o=n(16);t.exports=function(t,e){return{getInitialState:function(){return o.isFunction(t.getInitialState)?void 0===e?t.getInitialState():o.object([e],[t.getInitialState()]):{}},componentDidMount:function(){o.extend(this,r);var n=this,i=void 0===e?this.setState:function(t){("undefined"==typeof n.isMounted||n.isMounted()===!0)&&n.setState(o.object([e],[t]))};this.listenTo(t,i)},componentWillUnmount:i.componentWillUnmount}}},function(t,e,n){var r=n(16),i=n(15);t.exports=r.extend({componentWillUnmount:i.stopListeningToAll},i)},function(t,e,n){var r=n(15),i=n(27),o=n(16);t.exports=function(t,e,n){return n=o.isFunction(e)?e:n,{getInitialState:function(){if(o.isFunction(t.getInitialState)){if(o.isFunction(e))return n.call(this,t.getInitialState());var r=n.call(this,t.getInitialState());return"undefined"!=typeof r?o.object([e],[r]):{}}return{}},componentDidMount:function(){o.extend(this,r);var i=this,s=function(t){if(o.isFunction(e))i.setState(n.call(i,t));else{var r=n.call(i,t);i.setState(o.object([e],[r]))}};this.listenTo(t,s)},componentWillUnmount:i.componentWillUnmount}}},function(t,e,n){var r=n(15);t.exports=function(t,e,n){return{componentDidMount:function(){for(var i in r)if(this[i]!==r[i]){if(this[i])throw"Can't have other property '"+i+"' when using Reflux.listenTo!";this[i]=r[i]}this.listenTo(t,e,n)},componentWillUnmount:r.stopListeningToAll}}},function(t,e,n){var r=n(15);t.exports=function(t){return{componentDidMount:function(){for(var e in r)if(this[e]!==r[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=r[e]}this.listenToMany(t)},componentWillUnmount:r.stopListeningToAll}}},function(t,e,n){"use strict";var r=n(12),i=r.createAction();t.exports={category:i}},function(t,e){function n(t){var e=this,n=f.call(arguments,1);return new Promise(function(i,o){function s(e){var n;try{n=t.next(e)}catch(r){return o(r)}u(n)}function c(e){var n;try{n=t["throw"](e)}catch(r){return o(r)}u(n)}function u(t){if(t.done)return i(t.value);var n=r.call(e,t.value);return n&&a(n)?n.then(s,c):c(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(t.value)+'"'))}return"function"==typeof t&&(t=t.apply(e,n)),t&&"function"==typeof t.next?void s():i(t)})}function r(t){return t?a(t)?t:u(t)||c(t)?n.call(this,t):"function"==typeof t?i.call(this,t):Array.isArray(t)?o.call(this,t):l(t)?s.call(this,t):t:t}function i(t){var e=this;return new Promise(function(n,r){t.call(e,function(t,e){return t?r(t):(arguments.length>2&&(e=f.call(arguments,1)),void n(e))})})}function o(t){return Promise.all(t.map(r,this))}function s(t){function e(t,e){n[e]=void 0,o.push(t.then(function(t){n[e]=t}))}for(var n=new t.constructor,i=Object.keys(t),o=[],s=0;s<i.length;s++){var c=i[s],u=r.call(this,t[c]);u&&a(u)?e(u,c):n[c]=t[c]}return Promise.all(o).then(function(){return n})}function a(t){return"function"==typeof t.then}function c(t){return"function"==typeof t.next&&"function"==typeof t["throw"]}function u(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:c(e.prototype):!1}function l(t){return Object==t.constructor}var f=Array.prototype.slice;t.exports=n["default"]=n.co=n,n.wrap=function(t){function e(){return n.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e}},function(t,e){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),!function(t,e){function n(){var t={},e=new p(function(e,n){t.resolve=e,t.reject=n});return t.promise=e,t}function r(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}function i(t){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document;e.appendChild(t)}function o(t){var e=[];for(var n in t)t[n]&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")}function s(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,i,o,s;return i=2147483648&t,o=2147483648&e,n=1073741824&t,r=1073741824&e,s=(1073741823&t)+(1073741823&e),n&r?2147483648^s^i^o:n|r?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o}function r(t,e,n){return t&e|~t&n}function i(t,e,n){return t&n|e&~n}function o(t,e,n){return t^e^n}function s(t,e,n){return e^(t|~n)}function a(t,i,o,s,a,c,u){return t=n(t,n(n(r(i,o,s),a),u)),n(e(t,c),i)}function c(t,r,o,s,a,c,u){return t=n(t,n(n(i(r,o,s),a),u)),n(e(t,c),r)}function u(t,r,i,s,a,c,u){return t=n(t,n(n(o(r,i,s),a),u)),n(e(t,c),r)}function l(t,r,i,o,a,c,u){return t=n(t,n(n(s(r,i,o),a),u)),n(e(t,c),r)}function f(t){for(var e,n=t.length,r=n+8,i=(r-r%64)/64,o=16*(i+1),s=new Array(o-1),a=0,c=0;n>c;)e=(c-c%4)/4,a=c%4*8,s[e]=s[e]|t.charCodeAt(c)<<a,c++;return e=(c-c%4)/4,a=c%4*8,s[e]=s[e]|128<<a,s[o-2]=n<<3,s[o-1]=n>>>29,s}function p(t){var e,n,r="",i="";for(n=0;3>=n;n++)e=t>>>8*n&255,i="0"+e.toString(16),r+=i.substr(i.length-2,2);return r}function h(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);128>r?e+=String.fromCharCode(r):r>127&&2048>r?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}var d,v,m,y,g,w,E,b,_,x=[],S=7,O=12,R=17,T=22,A=5,L=9,j=14,C=20,N=4,k=11,q=16,P=23,I=6,M=10,F=15,U=21;for(t=h(t),x=f(t),w=1732584193,E=4023233417,b=2562383102,_=271733878,d=0;d<x.length;d+=16)v=w,m=E,y=b,g=_,w=a(w,E,b,_,x[d+0],S,3614090360),_=a(_,w,E,b,x[d+1],O,3905402710),b=a(b,_,w,E,x[d+2],R,606105819),E=a(E,b,_,w,x[d+3],T,3250441966),w=a(w,E,b,_,x[d+4],S,4118548399),_=a(_,w,E,b,x[d+5],O,1200080426),b=a(b,_,w,E,x[d+6],R,2821735955),E=a(E,b,_,w,x[d+7],T,4249261313),w=a(w,E,b,_,x[d+8],S,1770035416),_=a(_,w,E,b,x[d+9],O,2336552879),b=a(b,_,w,E,x[d+10],R,4294925233),E=a(E,b,_,w,x[d+11],T,2304563134),w=a(w,E,b,_,x[d+12],S,1804603682),_=a(_,w,E,b,x[d+13],O,4254626195),b=a(b,_,w,E,x[d+14],R,2792965006),E=a(E,b,_,w,x[d+15],T,1236535329),w=c(w,E,b,_,x[d+1],A,4129170786),_=c(_,w,E,b,x[d+6],L,3225465664),b=c(b,_,w,E,x[d+11],j,643717713),E=c(E,b,_,w,x[d+0],C,3921069994),w=c(w,E,b,_,x[d+5],A,3593408605),_=c(_,w,E,b,x[d+10],L,38016083),b=c(b,_,w,E,x[d+15],j,3634488961),E=c(E,b,_,w,x[d+4],C,3889429448),w=c(w,E,b,_,x[d+9],A,568446438),_=c(_,w,E,b,x[d+14],L,3275163606),b=c(b,_,w,E,x[d+3],j,4107603335),E=c(E,b,_,w,x[d+8],C,1163531501),w=c(w,E,b,_,x[d+13],A,2850285829),_=c(_,w,E,b,x[d+2],L,4243563512),b=c(b,_,w,E,x[d+7],j,1735328473),E=c(E,b,_,w,x[d+12],C,2368359562),w=u(w,E,b,_,x[d+5],N,4294588738),_=u(_,w,E,b,x[d+8],k,2272392833),b=u(b,_,w,E,x[d+11],q,1839030562),
E=u(E,b,_,w,x[d+14],P,4259657740),w=u(w,E,b,_,x[d+1],N,2763975236),_=u(_,w,E,b,x[d+4],k,1272893353),b=u(b,_,w,E,x[d+7],q,4139469664),E=u(E,b,_,w,x[d+10],P,3200236656),w=u(w,E,b,_,x[d+13],N,681279174),_=u(_,w,E,b,x[d+0],k,3936430074),b=u(b,_,w,E,x[d+3],q,3572445317),E=u(E,b,_,w,x[d+6],P,76029189),w=u(w,E,b,_,x[d+9],N,3654602809),_=u(_,w,E,b,x[d+12],k,3873151461),b=u(b,_,w,E,x[d+15],q,530742520),E=u(E,b,_,w,x[d+2],P,3299628645),w=l(w,E,b,_,x[d+0],I,4096336452),_=l(_,w,E,b,x[d+7],M,1126891415),b=l(b,_,w,E,x[d+14],F,2878612391),E=l(E,b,_,w,x[d+5],U,4237533241),w=l(w,E,b,_,x[d+12],I,1700485571),_=l(_,w,E,b,x[d+3],M,2399980690),b=l(b,_,w,E,x[d+10],F,4293915773),E=l(E,b,_,w,x[d+1],U,2240044497),w=l(w,E,b,_,x[d+8],I,1873313359),_=l(_,w,E,b,x[d+15],M,4264355552),b=l(b,_,w,E,x[d+6],F,2734768916),E=l(E,b,_,w,x[d+13],U,1309151649),w=l(w,E,b,_,x[d+4],I,4149444226),_=l(_,w,E,b,x[d+11],M,3174756917),b=l(b,_,w,E,x[d+2],F,718787259),E=l(E,b,_,w,x[d+9],U,3951481745),w=n(w,v),E=n(E,m),b=n(b,y),_=n(_,g);var D=p(w)+p(E)+p(b)+p(_);return D.toLowerCase()}function a(t){var e=new RegExp("(?:^|;\\s*)"+t+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return e?e[1]:void 0}function c(t,e,n){var r=new Date;r.setTime(r.getTime()-864e5);var i="/";doc.cookie=t+"=;path="+i+";domain=."+e+";expires="+r.toGMTString(),doc.cookie=t+"=;path="+i+";domain=."+n+"."+e+";expires="+r.toGMTString()}function u(){var e=t.location.hostname,n=["taobao.net","taobao.com","tmall.com","tmall.hk","etao.com","alibaba.com","alibaba-inc.com","alipay.com","aliyun.com","tdd.la"],r=new RegExp("([^.]*?)\\.?((?:"+n.join(")|(?:").replace(/\./g,"\\.")+"))","i"),i=e.match(r)||[],o=i[2]||"taobao.com",s=i[1]||"m";"taobao.net"!==o||"x"!==s&&"waptest"!==s&&"daily"!==s?"taobao.net"===o&&"demo"===s?s="demo":"taobao.com"===o&&"tms"===s?s="m":"tmall.com"===o&&"www"===s?s="m":"tdd.la"===o&&"m"===s&&(s=""):s="waptest";var a="etao.com"===o?"apie":"api";m.mainDomain=o,m.subDomain=s,m.prefix=a}function l(){var e=t.navigator.userAgent,n=e.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(m.WindVaneVersion=n[1]);var r=e.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);r&&(m.AliAppName=r[1],m.AliAppVersion=r[2])}function f(t){this.id=++w,this.params=r(t||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=y.slice(0)}var p=t.Promise,h=p.resolve(),d=t.localStorage;if(d)try{d.setItem("@private","false")}catch(v){d=!1}var m={useAlipayJSBridge:!1},y=[],g={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};u(),l();var w=0;f.prototype.use=function(t){if(!t)throw new Error("middleware is undefined");return this.middlewares.push(t),this},f.prototype.__processRequestMethod=function(t){var e=this.params,n=this.options;"get"===e.type&&"jsonp"===e.dataType?n.getJSONP=!0:"get"===e.type&&"json"===e.dataType?n.getJSON=!0:"post"===e.type&&(n.postJSON=!0),t()},f.prototype.__processRequestType=function(t){var n=this,r=this.options;if(m.H5Request===!0&&(r.H5Request=!0),m.WindVaneRequest===!0&&(r.WindVaneRequest=!0),r.H5Request===!1&&r.WindVaneRequest===!0){if(!e.windvane||parseFloat(r.WindVaneVersion)<5.4)throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境")}else r.H5Request===!0?r.WindVaneRequest=!1:"undefined"==typeof r.WindVaneRequest&&"undefined"==typeof r.H5Request&&(e.windvane&&parseFloat(r.WindVaneVersion)>=5.4?r.WindVaneRequest=!0:r.H5Request=!0);t().then(function(){var t=r.retJson.ret;return t instanceof Array&&(t=t.join(",")),r.WindVaneRequest===!0&&(!t||t.indexOf("HY_FAILED")>-1||t.indexOf("HY_NO_HANDLER")>-1||t.indexOf("HY_CLOSED")>-1||t.indexOf("HY_EXCEPTION")>-1||t.indexOf("HY_NO_PERMISSION")>-1)?(m.H5Request=!0,n.__sequence([n.__processRequestType,n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])):void 0})};var E="_m_h5_tk",b="_m_h5_tk_enc";f.prototype.__getTokenFromAlipay=function(){var e=n(),r=this.options,i=(t.navigator.userAgent,!!location.protocol.match(/^https?\:$/)),o="AP"===r.AliAppName&&parseFloat(r.AliAppVersion)>=8.2;return r.useAlipayJSBridge===!0&&!i&&o&&t.AlipayJSBridge&&t.AlipayJSBridge.call?t.AlipayJSBridge.call("getMtopToken",function(t){t&&t.token&&(r.token=t.token),e.resolve()},function(){e.resolve()}):e.resolve(),e.promise},f.prototype.__getTokenFromCookie=function(){var t=this.options;return t.token=t.token||a(E),t.token&&(t.token=t.token.split("_")[0]),p.resolve()},f.prototype.__processToken=function(t){var e=this,n=this.options;return this.params,n.token&&delete n.token,n.WindVaneRequest!==!0?h.then(function(){return e.__getTokenFromAlipay()}).then(function(){return e.__getTokenFromCookie()}).then(t).then(function(){var t=n.retJson,r=t.ret;if(r instanceof Array&&(r=r.join(",")),r.indexOf("TOKEN_EMPTY")>-1||r.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes)return e.__sequence([e.__processToken,e.__processRequestUrl,e.__processUnitPrefix,e.middlewares,e.__processRequest]);maxRetryTimes>0&&(c(E,n.mainDomain,n.subDomain),c(b,n.mainDomain,n.subDomain)),t.retType=g.TOKEN_EXPIRED}}):void t()},f.prototype.__processRequestUrl=function(t){var e=this.params,n=this.options;if(n.H5Request===!0){var r="//"+(n.prefix?n.prefix+".":"")+(n.subDomain?n.subDomain+".":"")+n.mainDomain+"/h5/"+e.api.toLowerCase()+"/"+e.v.toLowerCase()+"/",i=(new Date).getTime(),o="waptest"===n.subDomain?"4272":"12574478",a=s(n.token+"&"+i+"&"+o+"&"+e.data),c={appKey:o,t:i,sign:a},u={data:e.data,ua:e.ua};Object.keys(e).forEach(function(t){"undefined"==typeof c[t]&&"undefined"==typeof u[t]&&(c[t]=e[t])}),n.getJSONP?c.type="jsonp":(n.getJSON||n.postJSON)&&(c.type="originaljson"),n.querystring=c,n.postdata=u,n.path=r}t()},f.prototype.__processUnitPrefix=function(e){var n=this.params,r=this.options;if(d&&r.H5Request===!0){var o=n.api,s=!1,c=a("_m_user_unitinfo_"),u=d.getItem("unitinfo");c&&c.split("|")[0].indexOf("center")<0&&u&&u.indexOf(o.toLowerCase())>=0&&(s=c.split("|")[1]),s&&r.path&&(r.path=r.path.replace(/^\/\//,"//"+s+".")),e().then(function(){if(d){var e=a("_m_unitapi_v_"),n=d.getItem("unitinfo");if(e){var o=n?JSON.parse(n):{};if(!n||e!==o.version){var s=!1,c="//h5."+r.subDomain+".taobao.com/js/mtop/unit/"+e+"/unitApi.js",u=document.createElement("script");u.src=c;var l=function(){s||(s=!0,u.onload=u.onerror=null,u.parentNode&&u.parentNode.removeChild(u))};u.onerror=function(){l()},t.jsonp_unitapi||(t.jsonp_unitapi=function(t){l(),d.setItem("unitinfo",JSON.stringify(t))}),i(u)}}}})}else e()};var _=0;f.prototype.__requestJSONP=function(t){function e(t){if(l&&clearTimeout(l),f.parentNode&&f.parentNode.removeChild(f),"TIMEOUT"===t)window[u]=function(){window[u]=undef;try{delete window[u]}catch(t){}};else{window[u]=void 0;try{delete window[u]}catch(e){}}}var r=n(),s=this.params,a=this.options,c=s.timeout||2e4,u="mtopjsonp"+ ++_,l=setTimeout(function(){e("TIMEOUT"),t("TIMEOUT::接口超时")},c);a.querystring.callback=u;var f=document.createElement("script");return f.src=a.path+"?"+o(a.querystring)+"&"+o(a.postdata),f.sync=!0,f.onerror=function(){e("ABORT"),t("ABORT::接口异常退出")},window[u]=function(){a.results=Array.prototype.slice.call(arguments),e(),r.resolve()},i(f),r.promise},f.prototype.__requestJSON=function(e){function r(t){l&&clearTimeout(l),"TIMEOUT"===t&&c.abort()}var i=n(),s=this.params,a=this.options,c=new t.XMLHttpRequest,u=s.timeout||2e4,l=setTimeout(function(){r("TIMEOUT"),e("TIMEOUT::接口超时")},u);c.onreadystatechange=function(){if(4==c.readyState){var t,n,o=c.status;if(o>=200&&300>o||304==o){r(),t=c.responseText,n=c.getAllResponseHeaders()||"";try{t=/^\s*$/.test(t)?{}:JSON.parse(t),t.responseHeaders=n,a.results=[t],i.resolve()}catch(s){e("PARSE_JSON_ERROR::解析JSON失败")}}else r("ABORT"),e("ABORT::接口异常退出")}};var f,p,h=a.path+"?"+o(a.querystring);if(a.getJSON?(f="GET",h+="&"+o(a.postdata)):a.postJSON&&(f="POST",p=o(a.postdata)),c.open(f,h,!0),c.withCredentials=!0,c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.headers)for(var d in s.headers)c.setRequestHeader(d,s.headers[d]);return c.send(p),i.promise},f.prototype.__requestWindVane=function(t){function r(t){u.results=[t],a.resolve()}var i,o,s,a=n(),c=this.params,u=this.options,l=c.data,f=c.api,p=c.v,h=u.postJSON?1:0,d=u.getJSON||u.postJSON?"orginaljson":"",v="https"===location.protocol?1:0,m=c.isSec||0,y=c.sessionOption||"AutoLoginOnly";if("undefined"==typeof c.ecode)throw new Error("UNEXCEPT_PARAM_ECODE::缺少ecode参数");return i=parseInt(c.ecode),s="undefined"!=typeof c.timer?parseInt(c.timer):"undefined"!=typeof c.timeout?parseInt(c.timeout):2e4,o=2*s,e.windvane.call("MtopWVPlugin","send",{api:f,v:p,post:String(h),type:d,isHttps:String(v),ecode:String(i),isSec:String(m),param:JSON.parse(l),timer:s,sessionOption:y},r,r,o),a.promise},f.prototype.__processRequest=function(t,e){var n=this;return h.then(function(){var t=n.options;if(t.H5Request&&t.getJSONP)return n.__requestJSONP(e);if(t.H5Request&&(t.getJSON||t.postJSON))return n.__requestJSON(e);if(t.WindVaneRequest)return n.__requestWindVane(e);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(t).then(function(){var t=n.options,e=(n.params,t.results[0]),r=e&&e.ret||[];e.ret=r,r instanceof Array&&(r=r.join(",")),r.indexOf("SUCCESS")>-1?e.retType=g.SUCCESS:e.retType=g.ERROR,t.retJson=e})},f.prototype.__sequence=function(t){function e(t){if(t instanceof Array)t.forEach(e);else{var s,a=n(),c=n();i.push(function(){return a=n(),s=t.call(r,function(t){return a.resolve(t),c.promise},function(t){return a.reject(t),c.promise}),s&&(s=s["catch"](function(t){a.reject(t)})),a.promise}),o.push(function(t){return c.resolve(t),s})}}var r=this,i=[],o=[];t.forEach(e);for(var s,a=h;s=i.shift();)a=a.then(s);for(;s=o.pop();)a=a.then(s);return a};var x=function(t){t()},S=function(t){t()};f.prototype.request=function(t){var e=this;this.options=r(t||{},m);var n=p.resolve([x,S]).then(function(t){var n=t[0],r=t[1];return e.__sequence([n,e.__processRequestMethod,e.__processRequestType,e.__processToken,e.__processRequestUrl,e.__processUnitPrefix,e.middlewares,e.__processRequest,r])}).then(function(){var t=e.options.retJson;return t.retType!==g.SUCCESS?p.reject(t):(e.options.successCallback&&e.options.successCallback(t),p.resolve(t))})["catch"](function(t){var n;return t instanceof Error?(console.error(t.stack),n={ret:[t.message],stack:[t.stack],retJson:g.ERROR}):n="string"==typeof t?{ret:[t],retJson:g.ERROR}:void 0!==t?t:e.options.retJson,e.options.failureCallback&&e.options.failureCallback(n),p.reject(n)});return x=function(t){n.then(t)["catch"](t)},n},e.mtop=function(t){return new f(t)},e.mtop.request=function(t,e,n){var r={H5Request:t.H5Request,WindVaneRequest:t.WindVaneRequest,LoginRequest:t.LoginRequest,AntiCreep:t.AntiCreep,AntiFlood:t.AntiFlood,successCallback:e,failureCallback:n||e};return new f(t).request(r)},e.mtop.H5Request=function(t,e,n){var r={H5Request:!0,successCallback:e,failureCallback:n||e};return new f(t).request(r)},e.mtop.middlewares=y,e.mtop.config=m,e.mtop.RESPONSE_TYPE=g,e.mtop.CLASS=f}(window,window.lib||(window.lib={})),function(t,e){function n(t){return t.preventDefault(),!1}function r(e,r){var i=this,o=t.dpr||1,s=document.createElement("div"),a=document.documentElement.getBoundingClientRect(),c=Math.max(a.width,window.innerWidth)/o,u=Math.max(a.height,window.innerHeight)/o;s.style.cssText=["-webkit-transform:scale("+o+") translateZ(0)","-ms-transform:scale("+o+") translateZ(0)","transform:scale("+o+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+c+"px","height:"+u+"px","z-index:999999","position:absolute","left:0","top:0px","background:#FFF","display:none"].join(";");var l=document.createElement("div");l.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),l.innerText=e;var f=document.createElement("a");f.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),f.innerText="关闭";var p=document.createElement("iframe");p.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),l.appendChild(f),s.appendChild(l),s.appendChild(p),document.body.appendChild(s),p.src=r,f.addEventListener("click",function(){i.hide();var t=document.createEvent("HTMLEvents");t.initEvent("close",!1,!1),s.dispatchEvent(t)},!1),this.addEventListener=function(){s.addEventListener.apply(s,arguments)},this.removeEventListener=function(){s.removeEventListener.apply(s,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),s.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-a.top),s.parentNode&&s.parentNode.removeChild(s)}}function i(t){var n=this,r=this.options;return this.params,t().then(function(){var t=r.retJson,i=t.ret;if(i instanceof Array&&(i=i.join(",")),(i.indexOf("SESSION_EXPIRED")>-1||i.indexOf("SID_INVALID")>-1||i.indexOf("AUTH_REJECT")>-1||i.indexOf("NEED_LOGIN")>-1)&&(t.retType=l.SESSION_EXPIRED,!r.WindVaneRequest&&(u.LoginRequest===!0||r.LoginRequest===!0))){if(!e.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");return e.login.goLoginAsync().then(function(t){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])})["catch"](function(t){throw new Error("CANCEL"===t?"LOGIN_CANCEL::用户取消登录":"LOGIN_FAILURE::用户登录失败")})}})}function o(t){var e=this.options;return this.params,e.AliAppName||e.AliAppVersion||u.AntiFlood!==!0&&e.AntiFlood!==!0?void t():t().then(function(){var t=e.retJson,n=t.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&t.data.url&&(location.href=t.data.url)})}function s(e){var n=this,i=this.options,o=this.params;return i.AliAppName||i.AliAppVersion||u.AntiCreep!==!0&&i.AntiCreep!==!0?void e():e().then(function(){var e=i.retJson,s=e.ret;return s instanceof Array&&(s=s.join(",")),s.indexOf("RGV587_ERROR::SM")>-1&&e.data.url?new a(function(i,s){function a(){l.removeEventListener("close",a),t.removeEventListener("message",c),s("USER_INPUT_CANCEL::用户取消输入")}function c(e){l.removeEventListener("close",a),t.removeEventListener("message",c),l.hide();var r;try{r=JSON.parse(e.data)||{}}catch(u){}if(r&&"child"===r.type){var f;try{f=JSON.parse(decodeURIComponent(r.content)),"string"==typeof f&&(f=JSON.parse(f));for(var p in f)o[p]=f[p];n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(i)}catch(u){s("USER_INPUT_FAILURE::用户输入失败")}}else i()}var u=e.data.url,l=new r("",u);l.addEventListener("close",c,!1),t.addEventListener("message",c,!1),l.show()}):void 0})}var a=t.Promise,c=e.mtop.CLASS,u=e.mtop.config,l=e.mtop.RESPONSE_TYPE;e.mtop.middlewares.push(i),e.mtop.loginRequest=function(t,e,n){var r={LoginRequest:!0,H5Request:!0,successCallback:e,failureCallback:n||e};return new c(t).request(r)},e.mtop.antiFloodRequest=function(t,e,n){var r={AntiFlood:!0,successCallback:e,failureCallback:n||e};return new c(t).request(r)},e.mtop.middlewares.push(o),e.mtop.antiCreepRequest=function(t,e,n){var r={AntiCreep:!0,successCallback:e,failureCallback:n||e};return new c(t).request(r)},e.mtop.middlewares.push(s)}(window,window.lib||(window.lib={})),t.exports=window.lib.mtop}]);